/**
 * This file is @generated by
 * src/roma/tools/api_plugin/tmpl/v8/host/js_callback_wrappers.tmpl. Do not edit.
 * Version: {{getVersion}}
 * Code Generator: {{getRomaGenerator}}
*/

/*
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

 /**
  * Wrapper around Js Callback for the Roma Host API.
  */

{{- range $file := .Files}}
{{- $proto_basename := base $file.Name | trimSuffix (ext $file.Name)}}
goog.require('jspb.BinaryWriter');
{{- range $svc := $file.Services}}
{{- $svcopts := index $svc.Options "privacysandbox.apis.roma.app_api.v1.roma_svc_annotation"}}
{{- if gt (len $svcopts.CppHostProcessCallbackIncludes) 0}}
{{- $appPb := $svcopts.RomaAppName | printf "%sPb" }}
{{- range $rpc := $svc.MethodsWithOption "privacysandbox.apis.roma.app_api.v1.roma_rpc_annotation"}}
{{- $internalName := printf "%s%s_internal" $svcopts.RomaAppName $rpc.Name | replace "." "_" | lower}}
/** @suppress {undefinedVars} */
( () => {
if (typeof {{$svcopts.RomaAppName}} !== 'undefined' && typeof {{$svcopts.RomaAppName}}.{{$rpc.Name}} === 'function') {
  var {{$internalName}} = {{$svcopts.RomaAppName}}.{{$rpc.Name}};

  {{$svcopts.RomaAppName}}.{{$rpc.Name}} = function(req) {
    var req_bytes = {{$appPb}}.ObjectToProtoBytes_{{$rpc.Name}}Request(req);
    var response_bytes = {{$internalName}}(req_bytes);
    return {{$appPb}}.ProtoBytesToObject_{{$rpc.Name}}Response(response_bytes);
  }
}
} )();
{{- end -}}{{/*rpc range*/}}
{{- end -}}{{/*if $svcopts.CppHostProcessCallbackIncludes*/}}
{{- end -}}{{/*svc range*/}}
{{- end -}}{{/*file range*/}}
